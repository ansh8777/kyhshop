<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>장바구니</title>
    <style>
        body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    margin: 20px;
}
.product {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
    border-bottom: 1px solid #ccc;
    padding-bottom: 10px;
}
.product img {
    max-width: 100px;
    margin-right: 10px;
}
.product .details {
    flex-grow: 1;
}
.product .details h3 {
    margin: 0;
    font-size: 1.2em;
}
.product .details p {
    margin: 5px 0;
}
.product .price {
    font-weight: bold;
}
.product .actions {
    display: flex;
    align-items: center; /* 세로 중앙 정렬 */
}
.product .actions label {
    margin-right: 10px; /* 주문 개수 라벨과 입력 창 사이 여백 */
}
.product .actions input[type="number"] {
    width: 50px; /* 주문 개수 입력 창 너비 */
    margin-right: 10px; /* 입력 창과 구매 버튼 사이 여백 */
}
.product .actions button {
    cursor: pointer;
    background-color: #4CAF50; /* 초록색 */
    color: white;
    border: none;
    padding: 8px 12px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 14px;
    border-radius: 4px;
    transition: background-color 0.3s;
}
.product .actions button:hover {
    background-color: #45a049; /* 더 진한 초록색 */
}
.product .actions button.cancel {
    background-color: #f44336; /* 빨간색 */
}
.product .actions button.cancel:hover {
    background-color: #da190b; /* 더 진한 빨간색 */
}
.summary {
    margin-top: 20px;
    border-top: 2px solid #333;
    padding-top: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.order-details {
    margin-top: 30px;
    border-top: 2px solid #333;
    padding-top: 20px;
}
.order-details h2 {
    font-size: 1.5em;
    margin-bottom: 10px;
}
.order-details .order-item {
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid #ccc;
    display: flex;
    align-items: center;
}
.order-details .order-item img {
    max-width: 80px;
    margin-right: 10px;
}
.order-details .order-item .details {
    flex-grow: 1;
}
.order-details .order-item .details h3 {
    margin: 0;
    font-size: 1.2em;
}
.order-details .order-item .details p {
    margin: 5px 0;
}
.order-details .order-item .actions {
    display: flex;
    align-items: center;
}
.order-details .order-item .actions button {
    margin-right: 10px;
}
    </style>
</head>
<body>
    <h1>장바구니</h1>

    <!-- 장바구니 상품 목록 -->
    <div th:each="basket : ${basketList}" class="product" id="product${basket.seq}">
        <img src="product1.jpg" alt="Product 1">
        <div class="details">
            <p>상품명 : <span th:text="${basket.product_id}"></span></p>
            <p>상품가격 : <span th:text="1000원"></span></p>
            <p>구매자: <span th:text="${basket.user_id}"></span></p>
        </div>
        <div class="actions">
            <label for="'quantity1'+${basket.seq}">주문 개수:</label>
            <input type="number" th:id="'quantity1'+${basket.seq}" th:value="${basket.amount}" class="order-quantity">
        </div>
    </div>

    <div class="summary">
        <div>
            <p>장바구니에 담은 개수: <span id="totalQuantity">0</span></p>
            <p>장바구니의 총괄 금액: $<span id="totalAmount">0.00</span></p>
        </div>
    </div>
    <div>
        <button onclick="checkout()">전체구매</button>
        <button onclick="continueShopping()">계속 쇼핑하기</button>
    </div>
    <!-- 구매완료 페이지 -->
    <h1>구매완료</h1>

    <div class="order-details">
        <div th:each="buy : ${buyList}" class="product" id="product${buy.seq}">
            <img src="product1.jpg" alt="Product 1">
            <div class="details">
                <p>상품명 : <span th:text="${buy.product_id}"></span></p>
                <p>주문개수 : <span th:text="${buy.amount}"></span></p>
                <p>배송 상태: <span id="deliveryStatus${buy.seq}">배송 준비 중</span></p>
                <p>구매일자 : <span th:text="${buy.reg_dt}"></span></p>
            </div>
        </div>
    <script>
        function checkout() {
            let totalQuantity = 0;

            // 각 상품의 주문 개수를 합산
            let orderQuantityElements = document.getElementsByClassName('order-quantity');
            for (let i = 0; i < orderQuantityElements.length; i++) {
                totalQuantity += parseInt(orderQuantityElements[i].value);
            }

            // 총 주문 개수를 화면에 표시
            document.getElementById('totalQuantity').textContent = totalQuantity;
            totalamount=totalQuantity*1000
            alert('전체구매가 완료되었습니다!');
            alert('전체구매가격은 '+totalamount+'원 입니다.');

            // 구매 완료 후 처리할 로직 추가
            location.href = "/buyer/change";
        }

        function continueShopping() {
            location.href = "/";
        }

    </script>

</body>
</html>
